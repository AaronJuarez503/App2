<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/stylesheets/compras.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Document</title>
</head>
<body>
    <h1 class="titulo">Lista de tu Pedidos</h1>

    <div class="contenedor">
        <table id="container">
            <thead>
                    <th>Imagen</th>
                    <th>Descripción</th>
                    <th>Cantidad</th>
                    <th>Acciones</th>
                    <th>Total</th>
                <!--se la come ever -->
                
            </thead>
            <tbody>
               
                
            </tbody>
        </table>
    </div>  
   <!--logo de la empresa-->
    <img class="logo" src="/stylesheets/logos-removebg-preview.png" alt="">

    <!--botones de aceptar y cancelar el pedido-->
    <button class="accep">Aceptar</button>
    <button class="cancel">Cancelar</button>

    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script>
        $(function () {
            $('.acep').click(function () {
                console.log('hola')
                
                location.href = '/pedido';
            });
            
        })
    </script>


    <script >
        $(function () {
            $.ajax({
        url: '/users/compra',
        method: 'GET',
        dataType: 'json',
        success: function(data) {
            
            console.log('Datos recibidos:', data);
          
           function addItemToContainer(imagen,nombre,cantidad,precio) {
                const $itemHtml = `
                <tr id="${nombre}">
                    <td><img src="${imagen}" alt="Producto 1"></td>
                    <td>${nombre}</td>
                    <td>${cantidad}</td>
                    <td>${precio}</td>
                    
                    <td data-id="${nombre}"><i class='bx bxs-trash' style='color:#ff0000; font-size: 24px;''></i></td>
                </tr>
                `;
                return $itemHtml
            }

            

        data.forEach(function(item) {
          

            var $itemDiv = addItemToContainer(item.imagen,item.nombre,item.cantidad,item.precio);
            $('#container').append($itemDiv);})
        

        

           
            
        },
        error: function(xhr, status, error) {
            console.error('Error en la petición AJAX:', error);
            $('#resultado').html('Error al cargar los datos');
        }
    });

    $('#container').off('click', '#btn').on('click', '#btn', function() {
        console.log('hola')

       /* var id = $(this).data('id');

        console.log(id)
        $(`#${id}`).closest('tr').remove();*/
        location.href = '/pedido';

    })

    

        
        







    
            
        })
        
        
            
             
        
    </script>
</body>
</html>