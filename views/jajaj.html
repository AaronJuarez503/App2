import { useState } from 'react'
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Package, Truck, CheckCircle } from 'lucide-react'

type EstadoPedido = 'entregado' | 'no_entregado' | 'en_camino'

interface EstadoPedidoProps {
  numeroPedido: string
  estado: EstadoPedido
  marcaLogo: string
  marcaNombre: string
}

export default function Component({ 
  numeroPedido = "ORD-12345", 
  estado = "en_camino", 
  marcaLogo = "/placeholder.svg?height=100&width=100", 
  marcaNombre = "MiMarca" 
}: EstadoPedidoProps) {
  const [estadoPedido, setEstadoPedido] = useState<EstadoPedido>(estado)

  const estadoInfo = {
    entregado: { color: "bg-green-500", icon: CheckCircle, text: "Entregado" },
    no_entregado: { color: "bg-red-500", icon: Package, text: "No Entregado" },
    en_camino: { color: "bg-yellow-500", icon: Truck, text: "En Camino" }
  }

  const { color, icon: Icon, text } = estadoInfo[estadoPedido]

  return (
    <Card className="w-full max-w-md mx-auto">
      <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
        <CardTitle className="text-sm font-medium">Estado del Pedido</CardTitle>
        <Badge className={`${color} text-white`}>{text}</Badge>
      </CardHeader>
      <CardContent>
        <div className="flex items-center space-x-4">
          <div className="flex-shrink-0">
            <img
              src={marcaLogo}
              alt={`Logo de ${marcaNombre}`}
              className="w-16 h-16 object-contain"
            />
          </div>
          <div>
            <p className="text-sm font-medium text-gray-900">{marcaNombre}</p>
            <p className="text-sm text-gray-500">Pedido #{numeroPedido}</p>
          </div>
        </div>
        <div className="mt-4 flex items-center space-x-2">
          {estadoPedido === 'en_camino' ? (
            <div className="relative w-full h-8 bg-gray-200 rounded-full overflow-hidden">
              <div className="absolute inset-0 flex items-center">
                <div className="h-2 bg-yellow-500 animate-truck-move" style={{width: '20%'}}></div>
              </div>
              <Truck className="absolute left-0 top-1/2 transform -translate-y-1/2 h-6 w-6 text-yellow-500 animate-truck-bounce" />
            </div>
          ) : (
            <>
              <Icon className="h-5 w-5 text-gray-400" />
              <span className="text-sm text-gray-500">{text}</span>
            </>
          )}
        </div>
      </CardContent>
      <style jsx>{`
        @keyframes truck-move {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(500%); }
        }
        @keyframes truck-bounce {
          0%, 100% { transform: translateY(-50%); }
          50% { transform: translateY(-60%); }
        }
        .animate-truck-move {
          animation: truck-move 5s linear infinite;
        }
        .animate-truck-bounce {
          animation: truck-bounce 0.5s ease-in-out infinite;
        }
      `}</style>
    </Card>
  )
}